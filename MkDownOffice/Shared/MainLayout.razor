@inherits LayoutComponentBase
@using MkDownOffice.Models
@using System.ComponentModel
@inject ViewModel _viewModel

<FluentDesignTheme Mode="DesignThemeModes.Dark" />

<FluentMainLayout>
  <Header>
    <TopMenu />
  </Header>
  <SubHeader>
    MkDownOffice
  </SubHeader>
  <Body>
      @Body
  </Body>
  <NavMenuContent>
    <NavMenu />
  </NavMenuContent>
</FluentMainLayout>

<!--

<FluentLayout>

  <FluentHeader>
    <TopMenu />
  </FluentHeader>

  <FluentSplitter Orientation="Orientation.Horizontal"
                  BarSize="6"
                  Panel1MinSize="15%"
                  Panel1Size="15%"
                  Panel2MinSize="50px">
    <Panel1>
      <NavMenu />
    </Panel1>
    <Panel2>
      @Body
    </Panel2>

  </FluentSplitter>
  <ToolBar />

  <FluentFooter>
    Footer
  </FluentFooter>

</FluentLayout>

-->

@code {
  protected override async Task OnInitializedAsync()
  {
    this._viewModel.PropertyChanged += HandlePropertyChanged;
    await base.OnInitializedAsync();
  }

  private void HandlePropertyChanged(object sender, PropertyChangedEventArgs e)
  {
    if (e.PropertyName == nameof(this._viewModel.CurrentMenu))
    {
      this.StateHasChanged();
    }
  }
  ~MainLayout()
  {
    this._viewModel.PropertyChanged -= HandlePropertyChanged;
  }
}