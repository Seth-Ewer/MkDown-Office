@page "/"
@using MkDownOffice.Models
@using MkDownOffice.Shared
@using System.ComponentModel
@inject NavigationManager Navigation
@inject ViewModel _viewModel

<FluentBodyContent>
  Select a markdown file
</FluentBodyContent>

@code {

  protected override async Task OnInitializedAsync()
  {
    this._viewModel.PropertyChanged += HandlePropertyChanged;
    await base.OnInitializedAsync();  
  }

  private void HandlePropertyChanged(object sender, PropertyChangedEventArgs e)
  {
    if(e.PropertyName == nameof(this._viewModel.CurrentFile))
    {
      Navigation.NavigateTo($"/md/{this._viewModel.CurrentFile?.Name}");
    }
  }

 ~Index()
  {
    this._viewModel.PropertyChanged -= HandlePropertyChanged;
  }
}